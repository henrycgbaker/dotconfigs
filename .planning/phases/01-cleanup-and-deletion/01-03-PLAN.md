---
phase: 01-cleanup-and-deletion
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - CLAUDE.md
  - rules/simplicity-first.md
  - rules/no-unnecessary-files.md
  - rules/modular-claude-docs.md
  - rules/git-commits.md
  - rules/git-workflow.md
  - rules/git-exclude.md
  - rules/python-standards.md
autonomous: true

must_haves:
  truths:
    - "The rules/ directory does not exist"
    - "CLAUDE.md contains condensed simplicity-first content (~4 lines)"
    - "CLAUDE.md contains condensed git workflow + commits + exclude content in one section (~15 lines)"
    - "CLAUDE.md contains condensed Python semantic preferences (~3 lines)"
    - "CLAUDE.md contains condensed no-unnecessary-files rule (~2 lines)"
    - "CLAUDE.md contains one-liner for modular CLAUDE.md docs"
    - "No dangling 'See rules/X.md' references remain in CLAUDE.md"
    - "CLAUDE.md has all rules inlined (Phase 2 optimises to <100 lines)"
  artifacts:
    - path: "CLAUDE.md"
      provides: "Personal Claude policies with all rules inlined"
  key_links: []
---

<objective>
Extract useful content from all 7 rules/ files, inline condensed versions into CLAUDE.md, then delete the entire rules/ directory.

Purpose: The rules/ directory contains ~450 lines across 7 files that are always loaded into context. Most content is either tool-enforced (Ruff handles formatting) or things Claude already knows (verbose examples, anti-pattern lists). Condensing to ~25 inline lines recovers significant context budget.

Output: CLAUDE.md with all useful rules content inlined. rules/ directory deleted.
</objective>

<execution_context>
@/Users/henrybaker/.claude/get-shit-done/workflows/execute-plan.md
@/Users/henrybaker/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-cleanup-and-deletion/01-CONTEXT.md
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Inline rules content into CLAUDE.md</name>
  <files>CLAUDE.md</files>
  <action>
    Rewrite CLAUDE.md to replace all `See rules/X.md` references with condensed inline content. Process each rules file per the locked decisions below.

    **Current CLAUDE.md structure (51 lines):**
    - Communication Style
    - Language
    - Autonomy & Decision Making
    - Simplicity First (Occam's Razor) -- has "See rules/simplicity-first.md"
    - Documentation -- has "See rules/no-unnecessary-files.md" and "See rules/git-exclude.md"
    - Git Workflow -- has "See rules/git-workflow.md" and "See rules/git-commits.md"
    - Code Style -- has "See rules/python-standards.md"

    **Condensation targets per locked decision:**

    1. **Simplicity First section (~4 lines, replacing `See rules/simplicity-first.md`):**
       Replace the current 3-line section with ~4 lines capturing non-obvious bits only:
       ```
       ## Simplicity First

       - Solve only what was asked -- no premature abstractions (only generalise at 3+ similar implementations)
       - Don't add backwards-compatibility shims when code can just change
       - Don't build for hypothetical future requirements or "just in case" configurability
       - Validate at system edges only -- trust internal code
       ```

    2. **Documentation section (~3 lines, replacing two `See` references):**
       Replace current section with:
       ```
       ## Documentation

       - Don't create ad-hoc .md files (NOTES.md, WORK_PLAN.md, etc.) unless explicitly asked
       - Use hierarchical CLAUDE.md files for large project directories
       - Use `.git/info/exclude` for project CLAUDE.md files, not `.gitignore`
       ```

    3. **Git section (~12 lines, merging three rules files into one compact section):**
       Replace current Git Workflow section with a merged section covering workflow + commits + exclude:
       ```
       ## Git

       **Workflow:** Feature branches + squash merge to main.
       - Branch from main (`feature/*`, `fix/*`, `refactor/*`, `docs/*`)
       - Commit freely on branches (relaxed conventions)
       - Squash merge to main with clean conventional commit, then delete branch
       - Use `/commit` for commits, `/squash-merge` to complete branches

       **Commits (main/squash):** `type(scope): description` -- types: feat, fix, docs, refactor, test. Subject <72 chars, imperative mood. No AI attribution.

       **Branches:** Relaxed -- WIP, notes, experiments are fine.

       **Exclusions:** Add CLAUDE.md and .claude/ to `.git/info/exclude` in projects (not .gitignore).
       ```

    4. **Code Style section (~3 lines, replacing `See rules/python-standards.md`):**
       Replace current section. Drop all tool-enforced rules (Ruff handles formatting, line length, imports). Keep only semantic preferences:
       ```
       ## Code Style

       - **Python preferences**: `pathlib.Path` over `os.path`, `X | None` over `Optional[X]`, f-strings, 3.10+ type hint syntax
       - Ruff auto-formats via PostToolUse hook -- don't manually review formatting
       ```

    5. **Drop the modular-claude-docs.md reference** -- it's now covered by the one-liner in Documentation section.

    **Final CLAUDE.md structure:**
    - Communication Style (existing, unchanged)
    - Language (existing, unchanged)
    - Autonomy & Decision Making (existing, unchanged)
    - Simplicity First (~4 lines)
    - Documentation (~3 lines)
    - Git (~12 lines)
    - Code Style (~3 lines)

    **Approach:** Inline condensed content to replace all `See rules/X.md` references. The resulting line count will be whatever it is after inlining -- Phase 2 then optimises to <100 lines.

    **Process each rules file as a sub-step:**
    - [ ] Sub-step A: Condense simplicity-first.md → ~4 lines in Simplicity First section
    - [ ] Sub-step B: Condense no-unnecessary-files.md → ~2 lines in Documentation section
    - [ ] Sub-step C: Condense modular-claude-docs.md → one-liner in Documentation section
    - [ ] Sub-step D: Condense git-exclude.md → fold into Git section
    - [ ] Sub-step E: Condense git-commits.md → fold into Git section
    - [ ] Sub-step F: Condense git-workflow.md → fold into Git section
    - [ ] Sub-step G: Condense python-standards.md → ~3 lines in Code Style section (semantic prefs only)

    **IMPORTANT:** Remove ALL `See rules/X.md` and `See ~/.claude/rules/X.md` references. No dangling pointers.
  </action>
  <verify>
    ```bash
    # No dangling rules references
    grep -i "rules/" CLAUDE.md && echo "FAIL: dangling rules references" || echo "PASS"

    # Line count check (informational -- Phase 2 optimises to <100 lines)
    wc -l CLAUDE.md

    # Key content present
    grep -q "backwards-compat" CLAUDE.md && echo "PASS: simplicity content" || echo "FAIL"
    grep -q "git/info/exclude" CLAUDE.md && echo "PASS: git exclude content" || echo "FAIL"
    grep -q "pathlib" CLAUDE.md && echo "PASS: python preferences" || echo "FAIL"
    grep -q "squash merge" CLAUDE.md && echo "PASS: git workflow content" || echo "FAIL"
    grep -q "ad-hoc" CLAUDE.md && echo "PASS: no-unnecessary-files content" || echo "FAIL"
    grep -q "hierarchical CLAUDE.md" CLAUDE.md && echo "PASS: modular docs content" || echo "FAIL"
    ```
  </verify>
  <done>CLAUDE.md rewritten with all rules content inlined. No dangling references to rules/ files. All 7 rules files' useful content preserved in condensed form.</done>
</task>

<task type="auto">
  <name>Task 2: Delete rules/ directory</name>
  <files>
    rules/simplicity-first.md
    rules/no-unnecessary-files.md
    rules/modular-claude-docs.md
    rules/git-commits.md
    rules/git-workflow.md
    rules/git-exclude.md
    rules/python-standards.md
  </files>
  <action>
    After Task 1 confirms CLAUDE.md has all inlined content, delete the entire rules/ directory:

    ```bash
    rm -rf rules/
    ```

    Then verify no other files in the repo reference `rules/`:
    ```bash
    grep -r "rules/" . --include="*.md" --include="*.json" --include="*.sh" --include="*.py" | grep -v .git | grep -v .planning | grep -v node_modules
    ```

    If any dangling references found, update those files to remove the reference.
  </action>
  <verify>
    ```bash
    # rules/ directory gone
    ls -d rules 2>/dev/null && echo "FAIL" || echo "PASS: rules/ deleted"

    # No dangling references anywhere in repo (excluding .planning/ which is context docs)
    grep -r "rules/" . --include="*.md" --include="*.json" --include="*.sh" --include="*.py" | grep -v .git | grep -v .planning | grep -v node_modules | wc -l
    # Should be 0
    ```
  </verify>
  <done>All 7 rules files deleted. rules/ directory removed. No dangling references to rules/ remain in the codebase.</done>
</task>

</tasks>

<verification>
After both tasks complete:

1. `ls -d rules 2>/dev/null` should return nothing
2. `grep -c "rules/" CLAUDE.md` should return 0
3. `wc -l CLAUDE.md` should show rules inlined (Phase 2 optimises to <100 lines)
4. CLAUDE.md should contain inline content for: simplicity-first, git workflow, git commits, git exclude, python preferences, no-unnecessary-files, modular docs
5. `grep -r "See.*rules/" . --include="*.md" | grep -v .git | grep -v .planning` should return nothing
</verification>

<success_criteria>
- The rules/ directory does not exist
- All 7 rules files are deleted
- CLAUDE.md contains condensed inline content from all rules files
- No "See rules/X.md" references remain anywhere in the repo
- CLAUDE.md has all rules content inlined (Phase 2 optimises to <100 lines)
- Simplicity-first content captures the 3 non-obvious bits (backwards-compat shims, 3+ threshold, no hypotheticals)
- Git content merges workflow + commits + exclude into one section
- Python content is semantic preferences only (no tool-enforced rules)
</success_criteria>

<output>
After completion, create `.planning/phases/01-cleanup-and-deletion/01-03-SUMMARY.md`
</output>
