---
phase: 02-context-optimisation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/.claude/CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "Global CLAUDE.md is under 100 lines"
    - "Every remaining line either corrects a Claude default or is a preference Claude would get wrong without it"
    - "Simplicity First section retains all 4 original rules verbatim"
    - "No content has moved to project-level -- file remains pure personal preferences"
    - "CLAUDE.md has no preamble -- dives straight into instructions"
  artifacts:
    - path: "~/.claude/CLAUDE.md"
      provides: "Global personal preferences for all Claude Code sessions"
      contains: "Simplicity First"
  key_links:
    - from: "~/.claude/CLAUDE.md"
      to: "Claude Code session context"
      via: "Always-loaded system prompt injection"
      pattern: "Loaded at session start by Claude Code"
---

<objective>
Rewrite ~/.claude/CLAUDE.md from ~50 lines to under 100 lines (targeting ~40-45 lines) by applying the "infer over instruct" principle line-by-line. Remove anything Claude does by default, compress verbose phrasing, and retain every genuinely non-obvious preference.

Purpose: Reduce always-loaded context so every Claude session has maximum working context. Each line must justify its existence.
Output: A lean CLAUDE.md that preserves all user preferences Claude would get wrong without instruction.
</objective>

<execution_context>
@/Users/henrybaker/.claude/get-shit-done/workflows/execute-plan.md
@/Users/henrybaker/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-context-optimisation/02-CONTEXT.md
@.planning/phases/02-context-optimisation/02-RESEARCH.md
@~/.claude/CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and rewrite CLAUDE.md</name>
  <files>~/.claude/CLAUDE.md</files>
  <action>
Apply the "infer over instruct" test to every line of the current CLAUDE.md. For each line, ask: "Would Claude get this right without being told?" If yes, delete. If no, keep (possibly compressed).

**Section-by-section instructions:**

**Communication Style (currently 6 lines → target ~4 lines):**
- Line 1 ("Be concise during execution..."): KEEP but COMPRESS — Claude can over-explain; condense to essential instruction. Merge the "ask questions freely" part since that's non-default (Claude often proceeds without asking).
- Line 2 ("Work iteratively..."): DELETE — Claude's agentic loop is iterative by default. This is redundant.
- Line 3 ("Provide only short one-line updates..."): KEEP but COMPRESS — Claude tends to frame tasks with preamble. Core instruction: skip preamble, brief updates.
- Line 4 ("When errors occur..."): KEEP but COMPRESS — can merge with line 3 or condense to "Brief error updates, then try alternatives."
- Line 5 ("At the end of a work piece..."): KEEP — Claude doesn't naturally provide architecture context summaries. This is genuinely non-default.
- Line 6 ("Include diagrams..."): KEEP — Claude doesn't proactively offer diagrams. Can merge with line 5.

**Language (currently 1 long line → target 1 line):**
- KEEP the rule — LLMs default to American English (research-confirmed).
- Claude's discretion on examples: The examples ("colour", "analyse") disambiguate the British/American split concretely. RECOMMENDATION: keep 1-2 examples for clarity but compress the verbose explanation of where American English applies. The rule "British English in prose, American in code" with a couple of examples is sufficient — Claude can infer that code/variable names/APIs need American spelling without being told each category.

**Autonomy & Decision Making (currently 2 lines → keep ~2 lines):**
- KEEP both lines — Claude doesn't naturally calibrate to "medium autonomy". These are non-redundant.
- Compress slightly if possible without losing meaning.

**Simplicity First (currently 4 lines → keep all 4 EXACTLY):**
- KEEP ALL 4 — User explicitly confirmed these are all genuinely non-obvious. Do NOT modify, condense, or remove any of these 4 lines. This is a LOCKED DECISION.

**Documentation (currently 3 lines → keep ~2-3 lines):**
- KEEP "Don't create ad-hoc .md files" — Claude tends to over-document (research-confirmed for Opus 4.5/4.6).
- KEEP "hierarchical CLAUDE.md" — user actively uses this pattern.
- KEEP ".git/info/exclude" — non-obvious convention.
- Compress if possible while retaining all three instructions.

**Git (currently 12 lines including blanks → target ~6-8 lines):**
- KEEP the convention — Claude needs commit format even outside /commit skill. This is a LOCKED DECISION.
- COMPRESS: merge workflow bullets into denser prose. The current format uses bold sub-headers (Workflow, Commits, Branches, Exclusions) with separate paragraphs — condense these.
- Retain: branch prefixes, squash format, /commit and /squash-merge references, .git/info/exclude rule, "no AI attribution".
- The "Branches: Relaxed" line can merge into the workflow description.

**Code Style (currently 2 lines → keep 2 lines):**
- KEEP both — pathlib preference isn't Claude's default, and the Ruff hook instruction prevents unnecessary manual formatting review.

**Structure & format (LOCKED DECISIONS):**
- No preamble — dive straight into instructions (no "# Personal Claude Policies" title or similar).
- Section ordering, header structure, and formatting density: optimise for token efficiency while remaining scannable.
- Keep section headers for scannability (research: "Scannable structure > token efficiency").

**The rewritten file should:**
1. Start directly with the first section header (no title/preamble)
2. Target ~40-45 lines total (well under the 100-line limit)
3. Retain all information that Claude would get wrong without
4. Use flat bullet points (avoid nested bullets where possible)
5. Be scannable via section headers
  </action>
  <verify>
Run `wc -l ~/.claude/CLAUDE.md` — must be under 100 lines.
Run `grep -c "Simplicity First" ~/.claude/CLAUDE.md` — must return 1 (section exists).
Run `grep "3+ similar" ~/.claude/CLAUDE.md` — must find the generalisation threshold rule.
Run `grep "backwards-compat" ~/.claude/CLAUDE.md` — must find the shims rule.
Run `grep "hypothetical" ~/.claude/CLAUDE.md` — must find the no-hypotheticals rule.
Run `grep "edges only" ~/.claude/CLAUDE.md` — must find the validation rule.
Run `grep "git/info/exclude" ~/.claude/CLAUDE.md` — must find the exclusion rule.
Run `grep "type(scope)" ~/.claude/CLAUDE.md` — must find the commit format.
Run `grep -i "british" ~/.claude/CLAUDE.md` — must find the language rule.
Run `grep "pathlib" ~/.claude/CLAUDE.md` — must find the Python preference.
Verify the file does NOT start with "# Personal Claude Policies" or any preamble title.
  </verify>
  <done>
CLAUDE.md is under 100 lines. All 4 Simplicity First rules are present verbatim. Git convention, language rule, Python preferences, documentation rules, and autonomy calibration are all retained. No preamble. Every remaining line is a genuine non-default preference or convention.
  </done>
</task>

<task type="auto">
  <name>Task 2: Validate no content regression</name>
  <files>~/.claude/CLAUDE.md</files>
  <action>
After rewriting, do a systematic check that no essential content was lost. Compare the new file against this checklist of content that MUST be present:

**Must be present (from locked decisions):**
1. Communication style preferences (concise execution, ask questions, brief updates, architecture summaries, diagrams)
2. British English rule for prose (with enough clarity to distinguish from code)
3. Autonomy calibration (medium autonomy, ask on ambiguity)
4. All 4 Simplicity First rules (verbatim: generalise at 3+, no backwards-compat shims, no hypothetical requirements, validate at edges only)
5. Documentation rules (no ad-hoc .md, hierarchical CLAUDE.md, .git/info/exclude)
6. Git workflow (feature branches, squash merge, /commit, /squash-merge)
7. Git commit format (type(scope): description, types list, <72 chars, imperative, no AI attribution)
8. Git exclusions (.git/info/exclude for CLAUDE.md and .claude/)
9. Python preferences (pathlib over os.path, union types, f-strings, 3.10+ hints)
10. Ruff auto-format note (don't manually review formatting)

**Must NOT be present (from decisions):**
- No meta-instructions about the config system
- No pointers to project-level overrides
- No preamble/title before first section

If any of the 10 must-have items are missing, add them back. If any must-not items are present, remove them.
  </action>
  <verify>
Manually scan the file section by section against the 10-point checklist above.
Run `wc -l ~/.claude/CLAUDE.md` — still under 100 lines after any adjustments.
  </verify>
  <done>
All 10 content categories confirmed present. No meta-instructions or preamble. File still under 100 lines.
  </done>
</task>

</tasks>

<verification>
1. `wc -l ~/.claude/CLAUDE.md` returns a number under 100
2. All 4 Simplicity First rules are present verbatim (grep for each)
3. File starts with a section header (## ...), not a title or preamble
4. No content regression — all 10 must-have categories present
5. No meta-instructions about config system or project-level overrides
</verification>

<success_criteria>
- CLAUDE.md is under 100 lines (targeting ~40-45)
- Every line justifies its existence via the "infer over instruct" test
- All locked-decision content is retained
- File is scannable with section headers
- No preamble
</success_criteria>

<output>
After completion, create `.planning/phases/02-context-optimisation/02-01-SUMMARY.md`
</output>
