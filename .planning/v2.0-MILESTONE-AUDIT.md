---
milestone: v2.0
audited: 2026-02-07T20:30:00Z
status: gaps_found
scores:
  requirements: 30/32
  phases: 4/4
  integration: 16/18
  flows: 3/6
gaps:
  requirements:
    - "CONF-04: .env versioning with auto-migration (not implemented)"
  integration:
    - "colour_cyan() called 6 times in dotconfigs CLI but never defined in lib/colours.sh — breaks deploy --dry-run"
    - "PLUGIN_DIR not initialised in plugins/claude/project.sh — breaks project scaffolding entirely"
  flows:
    - "Fresh install: deploy command fails on colour_cyan"
    - "Project scaffolding: project.sh fails on missing PLUGIN_DIR"
    - "PATH availability: untestable due to deploy break"
tech_debt:
  - phase: requirements
    items:
      - "CONF-04: .env versioning (DOTCONFIGS_VERSION=2.0) not implemented — deferred"
      - "MIGR-02: deploy.sh deleted (clean break) instead of deprecated wrapper — intentional design change, requirement text outdated"
---

# v2.0 Milestone Audit Report

**Milestone:** v2.0 — Plugin Architecture
**Audited:** 2026-02-07
**Status:** GAPS FOUND — 2 critical bugs block release

## Summary

All 4 phases passed individual verification with 32/32 success criteria met. However, cross-phase integration testing reveals **2 critical bugs** that break end-to-end flows. Both are small fixes (< 10 lines total).

Bash 3.2 compatibility: **PASS** — no violations found.

## Requirements Coverage

### Satisfied (30/32)

| Requirement | Phase | Status |
|-------------|-------|--------|
| PLUG-01 | 4 | ✓ Plugin discovery via filesystem scan |
| PLUG-02 | 4 | ✓ Plugin interface contract (setup.sh + deploy.sh) |
| PLUG-03 | 4 | ✓ Lazy plugin loading |
| PLUG-04 | 4 | ✓ Shared library layer (lib/*.sh) |
| PLUG-05 | 4 | ✓ Plugin isolation (import from lib/ only) |
| CLI-01 | 4 | ✓ Single dotconfigs entry point |
| CLI-02 | 5 | ✓ `dotconfigs setup [plugin]` wizard |
| CLI-03 | 5 | ✓ `dotconfigs deploy [plugin]` deployment |
| CLI-04 | 7 | ✓ `dotconfigs status [plugin]` state display |
| CLI-05 | 7 | ✓ `dotconfigs list` with installed status |
| CLI-06 | 7 | ✓ `dotconfigs help [command]` contextual help |
| CLI-07 | 7 | ✓ PATH symlink during deploy |
| CLPL-01 | 5 | ✓ Claude wizard migrated |
| CLPL-02 | 5 | ✓ Claude deploy migrated |
| CLPL-03 | 5 | ✓ Assets under plugins/claude/ |
| CLPL-04 | 5 | ✓ Project scaffolding preserved |
| GITP-01 | 6 | ✓ Git hooks deployment |
| GITP-02 | 6 | ✓ Git identity wizard |
| GITP-03 | 6 | ✓ Git workflow settings |
| GITP-04 | 6 | ✓ Git aliases |
| GITP-05 | 6 | ✓ Hook scope (per-project default, global opt-in) |
| CONF-01 | 5 | ✓ .env namespacing (CLAUDE_*, GIT_*) |
| CONF-02 | 5 | ✓ Unified .env file |
| CONF-03 | 5 | ✓ Pre-filled wizard defaults |
| MIGR-01 | 5 | ✓ Strangler fig migration |
| COMP-01 | 4 | ✓ Bash 3.2 compatible |
| COMP-02 | 7 | ✓ macOS and Linux portable |
| COMP-03 | 5 | ✓ GSD framework coexistence |
| QUAL-03 | 7 | ✓ Idempotent deploy |
| QUAL-04 | 7 | ✓ Conflict detection |

### Unsatisfied (2/32)

| Requirement | Phase | Status | Notes |
|-------------|-------|--------|-------|
| CONF-04 | 5 | ✗ NOT IMPLEMENTED | .env versioning with DOTCONFIGS_VERSION=2.0 and auto-migration — never built |
| MIGR-02 | 7 | ✗ DESIGN CHANGED | Requirement says "deprecated wrapper" but deploy.sh was cleanly deleted instead. Intentional — documented in Phase 5 success criteria. Requirement text is outdated. |

## Phase Verification Summary

| Phase | Score | Status | Gaps |
|-------|-------|--------|------|
| 4: Core Infrastructure | 6/6 | ✓ PASSED | None |
| 5: Claude Plugin Extraction | 8/8 | ✓ PASSED | None (CONF-04 not in phase scope) |
| 6: Git Plugin | 8/8 | ✓ PASSED | None |
| 7: Integration & Polish | 10/10 | ✓ PASSED | None |

All phases passed individual verification. Issues are cross-phase wiring, not phase-internal.

## Cross-Phase Integration

### Critical Bugs (2)

#### Bug 1: Missing `colour_cyan()` function

**Severity:** CRITICAL — breaks `dotconfigs deploy --dry-run`
**Location:** `dotconfigs` lines 321-323, 352-354 call `colour_cyan()` but `lib/colours.sh` only defines `colour_green()`, `colour_yellow()`, `colour_red()`
**Root cause:** Phase 7 plan 07-01 added colours.sh with 3 colours, but plan 07-03 added dry-run banner using cyan without updating colours.sh
**Fix:** Add `colour_cyan()` to `lib/colours.sh` (~5 lines)

#### Bug 2: Missing `PLUGIN_DIR` in `plugins/claude/project.sh`

**Severity:** CRITICAL — breaks `dotconfigs project .` entirely
**Location:** `plugins/claude/project.sh` uses `$PLUGIN_DIR` at lines 186, 187, 234 but never initialises it
**Root cause:** Phase 5 plan 05-04 extracted project.sh but missed the `PLUGIN_DIR` initialisation that setup.sh and deploy.sh have
**Fix:** Add `PLUGIN_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"` (~1 line)

### Working Integrations (16/18)

| Integration | Status |
|-------------|--------|
| CLI → lib/wizard.sh | ✓ |
| CLI → lib/symlinks.sh | ✓ |
| CLI → lib/discovery.sh | ✓ |
| CLI → lib/validation.sh | ✓ |
| CLI → lib/colours.sh | ✗ Missing colour_cyan |
| CLI → plugins/claude/setup.sh | ✓ |
| CLI → plugins/claude/deploy.sh | ✓ |
| CLI → plugins/claude/project.sh | ✗ Missing PLUGIN_DIR |
| CLI → plugins/git/setup.sh | ✓ |
| CLI → plugins/git/deploy.sh | ✓ |
| CLI → plugins/git/project.sh | ✓ |
| .env → setup wizards (write) | ✓ |
| .env → deploy scripts (read) | ✓ |
| .env → status checks | ✓ |
| claude plugin → templates/hooks/commands | ✓ |
| git plugin → hooks | ✓ |
| deploy flags → claude plugin | ✓ |
| deploy flags → git plugin | ✓ |

## E2E Flow Analysis

| Flow | Status | Break Point |
|------|--------|-------------|
| Fresh install (setup → deploy → status) | ✗ BROKEN | Deploy fails on colour_cyan |
| Project scaffolding | ✗ BROKEN | project.sh fails on PLUGIN_DIR |
| Re-run idempotency | ○ UNTESTABLE | Depends on deploy working |
| Status inspection | ✓ PASS | Works (no .env and list both correct) |
| Help system | ✓ PASS | All 8 help routes work |
| PATH availability | ○ UNTESTABLE | Depends on deploy working |

## Bash 3.2 Compliance

**Status:** ✓ PASS

No bash 4+ features found:
- `local -n` / `declare -n` (namerefs): 0 matches
- `declare -A` (associative arrays): 0 matches
- `${var,,}` / `${var^^}` (case conversion): 0 matches

## Tech Debt

| Item | Severity | Notes |
|------|----------|-------|
| CONF-04: .env versioning not implemented | Low | No v1 → v2 migration path exists. Users would need to re-run setup. Acceptable for personal tool. |
| MIGR-02: Requirement text outdated | None | deploy.sh was intentionally deleted (cleaner than wrapper). Requirement should be updated to reflect actual decision. |

---

*Audited: 2026-02-07*
*Method: Phase verification aggregation + gsd-integration-checker cross-phase analysis*
